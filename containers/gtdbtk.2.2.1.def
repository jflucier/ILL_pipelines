# build new image using this command:
# singularity build --force --fakeroot gtdbtk.2.2.1.sif gtdbtk.2.2.1.def

BootStrap: docker
From: ubuntu:22.04

%setup

%environment
#  export PATH=/mash-Linux64-v2.3:$PATH
#  export PATH=/FastTree_2.1.11:$PATH
#  export PATH=/pplacer-Linux-v1.1.alpha19:$PATH
#  export PATH=/fastANI-Linux64-v1.33:$PATH
#  export PATH=/hmmer-3.3.2/bin:$PATH

%post
  apt-get update && apt-get -y upgrade

  ln -fs /usr/share/zoneinfo/America/New_York /etc/localtime

  # # needed for concoct
  export DEBIAN_FRONTEND=noninteractive
  apt-get -y install \
  build-essential \
  wget \
  git \
  less \
  zlib1g \
  unzip \
  hmmer \
  prodigal \
  fastani \
  pplacer \
  fasttree \
  mash \
  python3 python3-dev python3-pip python3-venv

  rm -rf /var/lib/apt/lists/*
  apt-get clean

  pip3 install gtdbtk==2.2.1